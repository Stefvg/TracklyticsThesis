\chapter{Context}
Zoals de titel al aangeeft is deze thesis gebaseerd op het concept DevOps. DevOps staat voor Developer Operations en probeert de communicatie, samenwerking en integratie tussen developers (Dev) en IT operation professionals (Ops) te verbeteren \cite{waller2015including}. Het volgende citaat is de definitie van DevOps: \\

\textit{DevOps is the union of people, process, and products to enable continuous delivery of value to our end users.\\
Donovan Brown, DevOps Senior Program Manager at Microsoft} \cite{de2016devops}\\

Met DevOps willen developers en managers het ontwikkelingsproces van software versnellen. Het DevOps proces bestaat uit een set van verschillende tools om dit doel te bereiken, namelijk \cite{DevOpsWiki}:
\begin{itemize}
\item Code: code ontwikkeling en continuous integration tools
\item Build: version control, samenvoegen van code
\item Test: het testen van de applicatie om bugs en performance issues eruit te halen
\item Package: het samenvoegen van de code om een software pakket van te maken
\item Release: het uitgeven van de software, automatisatie hiervan
\item Configure: het configureren van de infrastructuur
\item Monitor: Applications performance monitoring, End user ervaring
\end{itemize}

In deze thesis wordt er gefocust op het monitoren van de software om developers te helpen bij het verbeteren van de software. Het monitoren van software baseert zich op twee eigenschappen van software systemen, namelijk: het meten van performance en het meten van de end user ervaring met de software. Door de software te monitoren kan men Feedback-Driven Development uitoefenen \cite{cito2015runtime}. Feedback-Driven development is het integreren van de runtime monitoring data in de tools die developers gebruiken om de software te ontwikkelen (bv. IDE). Door deze integratie kunnen developers sneller en gemakkelijker bugs in de software vinden, omdat de gebruikte tools dit door de gemonitorde data kunnen aangeven.\\

Runtime monitoring is het monitoren van een software systeem dat in productie genomen is om zo problemen te ontdekken die in de testfase niet uit het systeem gehaald konden worden. Met een systeem om de software at runtime te monitoren kunnen de developers en managers ontdekken hoe gebruikers de software werkelijk gebruiken en waar de performance problemen zich bevinden. Runtime monitoring systemen bestaan al langer, enkele voorbeelden zijn New Relic \cite{NewRelic}, Google Analytics \cite{GooAna} en Metrics \cite{Metrics}. Dit soort systemen collecteren data uit een software systeem en geven deze weer in een dashboard. \\

Continuous delivery van software is het hoofddoel van DevOps. Continuous delivery is het onmiddelijk aanleveren van nieuwe features of oplossingen voor problemen zonder een echt release plan en is een onderdeel van agile software development \cite{beck2001manifesto} \cite{fowler2001agile}. Agile software development methodes moeten ervoor zorgen dat de kost om tijdens het ontwikkelen van eensoftware project zaken te veranderen zo laag mogelijk blijft \cite{highsmith2001agile}. Het baseert zich op twee concepten: de meedogenloze eerlijkheid van werkende code en de effectiviteit van mensen die met goodwill samenwerken. DevOps is ontstaan uit de toenemende populariteit van agile software development. Hoewel DevOps en agile development soortgelijkend zijn, verschillen ze op een aantal belangrijke aspecten. Agile development is een verandering van denkwijze van developers, terwijl DevOps een verandering in de cultuur van de organisatie is. \\

Deze thesis situeert zich in de wereld van mobiele applicaties. Het ontwikkelen van mobiele applicaties is in vele opzichten gelijkend aan het ontwikkelen van software voor andere embedded systemen. Ze delen de volgende gemeenschappelijke problemen: security, performance, betrouwbaarheid en gelimiteerde opslagruimte \cite{wasserman2010software}. Het ontwikkelen van mobiele applicaties verschilt van het ontwikkelen van applicaties voor embedded systemen in de volgende aspecten:
\begin{itemize}\label{Verschillen}
\item Potenti\"ele samenwerking tussen verschillende applicaties
\item Het aanroepen en gebruiken van verschillende sensoren
\item Native en hybrid (mobile web) applicaties. Hybrid applicaties kunnen in een mobiele webbrowser uitgevoerd worden, dit is onmogelijk bij embedded systemen.
\item Ondersteuning van verschillende hardware en besturingssystemen
\item Security tegen malware
\item User Interface. Een embedded applicatie kan eender welke UI hebben, terwijl de een mobiele applicatie een deel van het design uit het systeem zelf moet halen (denk maar aan een statusbar met de tijd in, de standaard terug knoppen, ...)
\item Test complexiteit. Een hybrid mobiele applicatie testen is complex, omdat deze de uitdagingen van web applicaties delen, maar er moet ook rekening gehouden worden met de eigenschappen van mobiele telefoonnetwerken.
\item Batterijverbruik. Embedded applicaties kunnen geoptimaliseerd worden om zo weinig mogelijk batterij te verbruiken, terwijl mobiele applicaties deels afhankelijk zijn van het resource management van het besturingssysteem.
\end{itemize}


Het doel is om de DevOps concepten te gebruiken in mobiele applicaties. In dit geval dus het monitoren van mobiele applicaties. Er zijn al enkele bestaande oplossingen, namelijk New Relic \cite{NewRelic} en Google Analytics \cite{GooAna}. \\ 

New Relic is een closed source mobiele library en kiest ervoor om zich puur te focussen op prestaties. De library genereert crash rapporten en gedetailleerde performance rapporten en geeft deze weer in een online dashboard. \\

Google Analytics is een closed source library ontworpen door Google, inc die ingebouwd kan worden in een mobiele applicatie. Google Analytics focust zich vooral op het monitoren van het gebruik van de applicaties, zoals welke schermen men het vaakst bezocht, welke acties de gebruiker onderneemt in de applicatie, etc.\\

In deze thesis wordt er gefocust op het monitoring aspect van DevOps in mobiele applicaties. In de rest van dit hoofdstuk wordt er gekeken naar de relevantie van het monitoren van mobiele applicaties. Er wordt afgesloten door te kijken naar een aantal development scenario's om de relevantie van het monitoren van mobiele applicaties te ondersteunen.


\section{Relevantie monitoren mobiele applicaties}
Op het moment van schrijven is het 2016; het jaar waarin ongeveer \'e\'en op de vijf mensen een smartphone gebruikt in het dagelijkse leven \cite{SmartphoneUsers}. Een smartphone bevat meerdere mobiele applicaties, ontwikkeld door developers wereldwijd. In de App Store van Apple staan ongeveer 1.5 miljoen verschillende applicaties. Een karakteristiek van de mobiele app wereld is dat er voor een bepaalde app vaak een of meerdere alternatieven bestaan. Dit wil zeggen dat de eigenaars van de app zich moeten proberen onderscheiden van de andere apps. Dat kan op meerdere manieren: door een praktisch design, door een snellere app te hebben, etc. Door tijd en/of geld te investeren in het verbeteren van de applicatie kan de applicatie de meest gebruikte applicatie worden en blijven in zijn categorie. \\

Met het design wordt de structuur van de gebruikersinterface van de applicatie bedoeld. Dit design bepaalt waar welke UI elementen komen te staan. Er wordt hier niet bedoeld op de esthetiek van de gebruikersinterface.
Het design wordt meestal op voorhand vastgelegd alvorens de applicatie ontwikkeld wordt, zodat de developer dit kan gebruiken bij het implementeren. Er kan niet objectief gezegd worden wat een goed of een slecht design is door een ontwikkelaar omdat dit een persoonlijke mening is. Het design kan enkel \'echt beoordeeld worden door de gebruikers van de applicatie. Dit komt omdat er een verschil kan zijn in hoe de eigenaars van de applicatie denken dat de applicatie gebruikt wordt en in hoe de gebruikers de applicatie gebruiken. Als er een verschil in deze denkwijze zit, dan zou het design best aangepast worden naar de smaak van de gebruikers. Dit bevordert enerzijds de kwaliteit van de applicatie en anderzijds cre\"eert het een band tussen gebruiker en developer. Indien er geen input komt van de gebruikers kan het nog steeds zijn dat de applicatie niet gebruikt wordt hoe de eigenaar het denkt. Er moet dan ontdekt worden welke elementen gebruikt worden en welke niet. Het monitoren van deze elementen kan ervoor zorgen dat er een goed beeld gevormd wordt voor de eigenaar die met deze informatie zijn inzicht in de applicatie kan veranderen. Dit zorgt ervoor dat de eigenaar betere beslissingen kan maken omtrent de toekomst en de verdere ontwikkeling van de applicatie. Zelfs al zijn er reviews van de gebruikers, dan nog is het voor de eigenaar meestal onmogelijk om te ontdekken welke elementen in de applicatie gebruikt worden en welke niet. Het is dus belangrijk om de applicatie te monitoren, ookal is er veel input van de gebruikers. \\


De prestaties van een applicatie zijn belangrijk voor een eigenaar omdat deze een impact hebben op de gebruiksvriendelijkheid van de applicatie. De meeste problemen die te maken hebben met prestaties zijn op te lossen door voldoende testen te schrijven en hiermee bugs en trage code sequenties uit de code te halen, maar sommige prestatie problemen doen zich enkel voor bij een significant gebruikersaantal. Drie uit de top tien van meest vermelde klachten van mobiele applicaties hebben te maken met de prestaties van een applicatie \cite{AppSucks}, namelijk: \textit{Resource-Heavy, Slow or lagging} en \textit{Frequent Crashing}. Deze klachten worden vaak in reviews van gebruikers geuit. De eigenaars kunnen uit deze reviews opmaken dat er een probleem is, maar developers weten niet zeker waar het fout loopt uit die reviews. Om uit te vinden waar de prestatie problemen zitten is het voor de developers handig om de applicatie te monitoren waar bottlenecks kunnen ontstaan. Hierdoor kunnen ze de exacte oorzaak van het probleem vinden. Op deze manier kan een potenti\"eel probleem al ontdekt worden voor deze in de reviews van de gebruikers opduikt. Dit zorgt ervoor dat de tevredenheid niet naar beneden gaat, omdat het probleem op voorhand al ontdekt wordt. \\



De reviews die door de gebruikers worden gelezen moeten met een korrel zout genomen worden; mensen hebben de intentie om te overdrijven. De eigenaars kunnen hiervoor gebruik maken van een methode, ontwikkeld door de Carnegie Mellon Universiteit \cite{fu2013people}, die een analyse uitvoert van deze reviews en de inconsistente reviews eruit filtert. Zo kan er een goed standpunt gevormd worden rond de kwaliteit van de applicatie. Maar zelfs met die methode zijn reviews nog steeds subjectief als het gaat over prestaties. De enige manier om objectief te redeneren hierover is door middel van metingen uit te voeren. Er zijn meerdere mechanismen om dat soort data te collecteren, met elk zijn voor en nadelen, namelijk: \textit{Built-in OS support, een monitoring library, een dedicated test environment, etc.}\\

\textbf{Built-in OS support} is een mechanisme dat door de ontwikkelaars van het besturingssysteem ingebouwd moet worden. Dit mechanisme kan dan verschillende data meten en collecteren, zoals bv. CPU load, hoeveelheid gebruikt RAM geheugen, netwerkgebruik, etc. Het voordeel aan zo'n systeem is dat dit low level kan ingebouwd worden in de code van het besturingssysteem. Dit wil zeggen dat deze data rechtstreeks gecollecteerd kan worden. Deze data moet dan nog doorgegeven kunnen worden aan de developers zodat zij deze kunnen verwerken en beoordelen. Het nadeel hieraan is dat developers niet kunnen aangeven welke data er gecollecteerd wordt. Ze kunnen zich enkel baseren op de data die er voor hen gecollecteerd wordt door het besturingssysteem. Met dit mechanisme is het mogelijk om problemen te ontdekken, maar is het moeilijker om deze te identificeren in de applicatie, omdat bv. het mechanisme kan aangeven dat er enorm veel RAM gebruikt wordt, maar men weet dan niet meteen waar de bug zich bevindt die het RAM geheugen vol heeft gestoken.\\

\textbf{Een monitoring library} is een high level softwarepakket dat ingebouwd moet worden in de applicatie en waarmee developers hun applicatie kunnen monitoren terwijl de applicatie al in productie genomen is. De developer kan meetpunten aangeven om data te kunnen collecteren. Deze data moet dan worden weergegeven aan de developer. Deze weergave verschilt per monitoring library. Het voordeel hieraan is dat developers enkel de data collecteren die ze nodig hebben van de applicatie en zo een compacter overzicht krijgen van deze data. Dit zorgt tevens voor meer vrijheid voor de developers. Het nadeel is dat deze implementatie trager is dan dat dit in het besturingssysteem ingebouwd zou worden. Met een monitoring library kan er ook enkel high level data gecollecteerd wil worden, wat wil zeggen dat vele informatie niet beschikbaar is omdat de API van het besturingssysteem dit niet aanbiedt. Indien een monitoring library een bug ontdekt als de applicatie in productie is, dan kunnen de developers dit probleem sneller identificeren, omdat ze weten waar ze de meetpunten geplaatst hebben. \\

\textbf{Een dedicated test environment} is een omgeving waar er verschillende tests op de applicatie worden uitgevoerd. Via deze methode kan men, alvorens men de applicatie in productie brengt ervoor zorgen dat bugs en de meeste performance issues uit de applicatie kunnen gehaald worden. Een dedicated test environment kan enkel in de development fase gebruikt worden en is een voorbereiding voor het in productie brengen van de applicatie. Nadat de applicatie in productie is genomen kan de test environment enkel gebruikt worden om proberen problemen op te lossen die binnengekomen zijn als bug reports van klanten. Via dit test environment kunnen ze dan proberen om deze bug te identificeren, repliceren en op te lossen. \\

De developer zal dus een keuze moeten maken welke oplossingen hij gebruikt in zijn applicatie. Het beste zou zijn om deze oplossingen te combineren, omdat er dan voor gezorgd kan worden dat bijna elke bug eruit kan gehaald worden en dat developers bugs (en de plaats waar ze voorkomen) kunnen ontdekken indien de applicatie al in productie is. Dit zorgt ervoor dat er veel tijd kan bespaard worden in het zoeken naar bugs. Er moet wel een evenwicht gevonden tussen het ontdekken en oplossen van bugs en de moeite die een developer moet doen om ervoor te zorgen dat dit ontdekt kan worden. Dit staat geheel in het kader van DevOps, omdat men zo snel mogelijk nieuwe versies wil uitrollen en indien de developer dan veel moeite moet steken in het ontdekken van bugs in de applicatie alvorens en tijdens de applicatie in productie is genomen, dan kan de uitrol niet zo snel gebeuren als gehoopt.\\


Een mobiele applicatie draait op een besturingssysteem dat speciaal ontworpen is voor de mobiele telefoons. Android en iOS zijn de twee besturingssystemen die het waard zijn om te vermelden \cite{MarketShare}. Een mobiele applicatie wordt dus meestal voor beiden ontwikkeld om een zo groot mogelijk aantal gebruikers te bereiken. Applicaties ontwikkelen voor de andere besturingssystemen is meestal niet rendabel voor de moeite en het geld dat erin moet gestoken worden. Zoals al vermeld in dit hoofdstuk \ref{Verschillen} is er een verschil tussen het ontwikkelen van mobiele applicaties en embedded applicaties. Vele van deze verschillen komen overeen met de verschillen van het ontwikkelen van websites, internet applicaties en pc applicaties. Dit moet in rekening gebracht worden bij het monitoren van mobiele applicaties. De verschillen in het monitoren van mobiele applicaties met het monitoren van websites, internet applicaties en pc applicaties wordt besproken in de volgende alinea's.\\

Indien de applicaties native worden ontwikkeld, dan moet de applicatie een keer voor Android en een keer voor iOS ontwikkeld worden. Dit zorgt ervoor dat er verschillende bugs en/of bottlenecks in de verschillende applicaties kunnen zitten. Het zou verkeerd zijn om gecollecteerde data van de twee applicaties samen te verwerken. \\
Een desktop computer of laptop heeft in de meeste gevallen ofwel een WiFi verbinding of een ethernet verbinding met het internet. De internetverbinding van een smartphone varieert tussen WiFi en een mobiel netwerk (4G, 3G, Edge, ...). Deze connecties hebben een verschillende snelheid en moeten dus anders ge\"interpreteerd worden. \\

Bij het monitoren van mobiele applicaties is het noodzakelijk dat een monitoring library zo weinig mogelijk resources (CPU, batterij, netwerk) gebruikt. Zoals eerder al vermeld is dit \'e\'en van de meest voorkomende klachten bij gebruikers van een mobiele applicatie. Bij pc applicaties wordt hier zelden rekening mee gehouden, omdat de prestaties van de resources hier significant hoger zijn dan bij smartphones. Bij internet applicaties is dit niet van toepassing, omdat dit heel erg af hangt van de implementatie van de browser. \\


Het monitoren van mobiele applicaties is op veel vlakken een handige feature. Enerzijds om als ondersteuning te dienen voor de eigenaars om de gebruikers van de applicatie tevreden te stellen en de applicatie te kunnen verbeteren/veranderen in functie van de gebruiker en hoe de applicatie gebruikt wordt. Anderzijds dient het monitoren van de applicatie als een hulpmiddel voor de developers om te kunnen ontdekken of er bugs in de applicatie zitten en ook de plaats van voorkomen te identificeren zodat deze opgelost kunnen geraken in een volgende versie. Er moet een keuze gemaakt worden tussen het gebruik van een bestaand monitoringsysteem of het zelf ontwikkelen van zo'n systeem met alle voordelen en nadelen in rekening gebracht. \\


\section{Development Scenarios}
In deze sectie worden er enkele scenario's uitgelegd die aantonen dat het monitoren van een mobiele applicatie belangrijk is. Deze sectie wordt opgedeeld in twee verschillende onderdelen die gemonitord kunnen worden, namelijk: \textit{prestaties en gebruik}.

\subsection{Prestaties}
Zoals eerder al vermeldt zijn de prestaties van een mobiele applicatie \'e\'en van de belangrijkste klachten van gebruikers van mobiele applicaties. Developers moeten er dus voor zorgen dat de prestaties van de applicatie zo hoog mogelijk zijn en dat er geen performance bugs in de applicatie voorkomen. \\

Om performance problemen te ontdekken moet er een manier zijn om deze problemen te kunnen ontdekken. Hier kan een monitoring systeem een oplossing bieden. Dit kan een monitoring systeem zijn dat ge\"implementeerd is in het besturingssysteem (\textit{Built-in OS support}), een third party monitoring library of een dedicated test environment.  \\
De informatie die de developer kan terugkrijgen hangt af van welk systeem de developer gekozen heeft.\\

Er zijn een aantal zaken die de applicatie traag kunnen maken, namelijk: CPU-intensieve code, veel RAM geheugen,  een trage server die ervoor zorgt dat content traag opgehaald wordt, ... \\

\textbf{CPU-intensieve code} gebruikt veel CPU tijd en kan de applicatie traag doen lijken. Dit kan ontdekt worden met een monitoringssysteem en afhankelijk van welke keuze van systeem kan de developer snel vinden waar deze code zich bevindt. De developer zou dan best deze code, indien mogelijk, herschrijven om de applicatie sneller te doen lopen. \\

Indien de applicatie \textbf{veel RAM geheugen} gebruikt, dan kan dit de applicatie traag doen lopen, omdat het RAM geheugen naar disk moet geswapt worden en deze acties de applicatie vertragen. De developer moet er dan voor zorgen dat de applicatie minder RAM geheugen gebruikt of de bug, waar veel RAM geheugen gebruikt wordt (bv.~ een oneindige while loop die in de achtergrond loopt), oplossen. \\

Mobiele applicaties halen vaak data van het internet of versturen data naar het internet. Indien deze acties veel tijd kosten hebben deze een impact op de snelheid van de applicatie. Dit soort problemen kunnen voorkomen indien het aantal gebruikers van de applicatie snel omhoog gaat en de servers de bijkomende trafiek niet aankunnen. Het is belangrijk voor de developer om te ontdekken dat deze problemen zich voordoen. Smartphones hebben een WiFi verbinding of een mobiele dataverbinding (4G, 3G, Edge,...). Deze karakteristiek moet mee in rekening genomen worden bij het beoordelen of er een probleem is en waar het probleem zich voordoet.\\


Buiten deze voorbeelden zijn er nog andere kenmerken die belangrijk zijn voor een mobiele applicatie, maar deze voorbeelden schetsen het beeld waarom het monitoren van mobiele applicaties belangrijk is.

\subsection{Gebruik}
Er bestaat een verschil in de gedachte van de ontwikkelaars van een applicatie over hoe de mobiele applicatie gebruikt wordt en hoe de gebruikers de applicatie werkelijk gebruiken. Deze mismatch zorgt ervoor dat ontwikkelaars verkeerde beslissingen kunnen nemen in verband met de mobiele applicatie. Ze kunnen bijvoorbeeld een veelgebruikte feature uit de applicatie halen, omdat ze niet weten dat deze feature vaak gebruikt wordt. Dit probleem komt voor in de lijst met meest voorkomende klachten over mobiele applicaties \cite{AppSucks}. \\

Om te weten te komen wat er gebruikt wordt in de applicatie kan er bijvoorbeeld geteld worden hoe vaak er op welke \textit{button} gedrukt wordt in de applicatie. Zo kan men zien welke \textit{buttons} er het meeste gebruikt worden. Men kan bijvoorbeeld ook gaan tellen hoe vaak een bepaald scherm bezocht wordt. Met deze informatie kan een ontwikkelaar ervoor kiezen om een bepaald scherm eruit te halen of weten dat ze een bepaald scherm zeker niet uit de applicatie mogen verwijderen. \\


Dit zijn enkele voorbeelden van hoe een ontwikkelaar een voordeel kan halen door een monitoringsysteem in zijn applicatie te verwerken. Er zijn natuurlijk nog andere scenario's waarin een monitoringsysteem belangrijk kan zijn in het ontwikkelen van mobiele applicaties en zo de klachten van gebruikers tot een minimum te houden.